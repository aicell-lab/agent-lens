<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Microscope Control UI</title>
  <!-- Include WinBox CSS -->
  <link rel="stylesheet" href="https://rawcdn.githack.com/nextapps-de/winbox/0.2.82/dist/winbox.min.css">
  <!-- Include your custom styles -->
  <style>
    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      font-family: Arial, sans-serif;
    }
    /* Layout styles */
    #image-display {
      position: absolute;
      top: 0;
      left: 0;
      width: 60%;
      height: 60%;
      border: 1px solid #ccc;
      box-sizing: border-box;
      background-color: #f0f0f0;
    }
    #control-chat-section {
      position: absolute;
      top: 0;
      right: 0;
      width: 40%;
      height: 60%;
      border-left: 1px solid #ccc;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
    }
    #tab-buttons {
      display: flex;
    }
    #tab-buttons button {
      flex: 1;
      padding: 10px;
      cursor: pointer;
      border: none;
      border-bottom: 1px solid #ccc;
      background-color: #e0e0e0;
    }
    #tab-buttons button.active {
      background-color: #fff;
      border-bottom: 2px solid #007bff;
    }
    #tab-contents {
      flex: 1;
      overflow: auto;
      padding: 10px;
    }
    #log-section {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 60%;
      height: 40%;
      border-top: 1px solid #ccc;
      box-sizing: border-box;
      background-color: #fafafa;
      overflow: auto;
      padding: 10px;
    }
    #similarity-search {
      position: absolute;
      bottom: 0;
      right: 0;
      width: 40%;
      height: 40%;
      border-left: 1px solid #ccc;
      border-top: 1px solid #ccc;
      box-sizing: border-box;
      background-color: #f9f9f9;
      overflow: auto;
      padding: 10px;
    }
    /* Additional styles for buttons and inputs */
    .control-button {
      display: inline-block;
      margin: 5px;
      padding: 10px 15px;
      background-color: #007bff;
      color: #fff;
      border: none;
      cursor: pointer;
    }
    .control-button:hover {
      background-color: #0056b3;
    }
    .control-input {
      margin: 5px 0;
      padding: 8px;
      width: 100%;
      box-sizing: border-box;
    }
  </style>
</head>
<body>
  <!-- Image Display Window -->
  <div id="image-display">
    <h3>Image Display</h3>
    <!-- Image or Canvas goes here -->
  </div>

  <!-- Control Panel and Chatbot Section -->
  <div id="control-chat-section">
    <div id="tab-buttons">
      <button id="control-tab" class="active">Manual Control</button>
      <button id="chat-tab">Chat</button>
    </div>
    <div id="tab-contents">
      <!-- Manual Control Content -->
      <div id="manual-control-content">
        <h3>Manual Control Panel</h3>
        <!-- Control inputs and buttons go here -->
        <div>
          <label>Stage Movement:</label><br>
          <button class="control-button">X+</button>
          <button class="control-button">X-</button>
          <button class="control-button">Y+</button>
          <button class="control-button">Y-</button>
          <button class="control-button">Z+</button>
          <button class="control-button">Z-</button>
        </div>
        <div>
          <label>Illumination Control:</label><br>
          <input type="range" class="control-input" min="0" max="100">
          <button class="control-button">Set Illumination</button>
        </div>
        <div>
          <label>Camera Exposure:</label><br>
          <input type="number" class="control-input">
          <button class="control-button">Set Exposure</button>
        </div>
        <button class="control-button">Snap Image</button>
        <button class="control-button">Autofocus</button>
      </div>
      <!-- Chatbot Content -->
      <div id="chatbot-content" style="display: none;">
        <h3>Chatbot Conversation</h3>
        <!-- Chat interface or iframe goes here -->
        <div>
          <!-- For example, embed the chatbot iframe -->
          <!-- <iframe src="chatbot_url_here" style="width: 100%; height: 100%; border: none;"></iframe> -->
          <p>Chatbot interface will be here.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Log Information -->
  <div id="log-section">
    <h3>Log Information</h3>
    <!-- Log messages go here -->
    <div>
      <p>Log entries will appear here.</p>
    </div>
  </div>

  <!-- Similarity Search Panel -->
  <div id="similarity-search">
    <h3>Similarity Search</h3>
    <!-- Similarity search results go here -->
    <div>
      <p>Search results will appear here.</p>
    </div>
  </div>

  <!-- Include WinBox JS -->
  <script src="https://rawcdn.githack.com/nextapps-de/winbox/0.2.82/dist/winbox.bundle.min.js"></script>
  <!-- Include hypha-core -->
  <script type="module">
    import { HyphaCore } from "https://cdn.jsdelivr.net/npm/hypha-core@0.20.38/dist/hypha-core.mjs";

    const hyphaCore = new HyphaCore();

    hyphaCore.on("add_window", (config) => {
      // Handle adding new windows if necessary
    });

    // Start hypha core
    await hyphaCore.start();

    // Tab switching functionality
    const controlTab = document.getElementById('control-tab');
    const chatTab = document.getElementById('chat-tab');
    const manualControlContent = document.getElementById('manual-control-content');
    const chatbotContent = document.getElementById('chatbot-content');

    controlTab.addEventListener('click', () => {
      controlTab.classList.add('active');
      chatTab.classList.remove('active');
      manualControlContent.style.display = 'block';
      chatbotContent.style.display = 'none';
    });

    chatTab.addEventListener('click', () => {
      chatTab.classList.add('active');
      controlTab.classList.remove('active');
      manualControlContent.style.display = 'none';
      chatbotContent.style.display = 'block';
    });

    // You can add more UI interaction scripts here

  </script>
</body>
</html>